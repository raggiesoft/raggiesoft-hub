<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Silas.Studio.MainPage"
             BackgroundColor="{DynamicResource SecondaryColor}">

    <Grid RowDefinitions="Auto, *" ColumnDefinitions="300, *">

        <Border Grid.Row="0" Grid.ColumnSpan="2" BackgroundColor="#212529" Padding="15,10" StrokeThickness="0">
            <Grid ColumnDefinitions="*, Auto, Auto">
                <Label Text="SILAS // ARCHITECT" TextColor="Cyan" FontAttributes="Bold" FontSize="20" VerticalOptions="Center" FontFamily="Consolas"/>

                <Button Grid.Column="1" Text="💾 SAVE ALL" Clicked="OnSaveClicked" BackgroundColor="#198754" TextColor="White" FontAttributes="Bold" Margin="0,0,10,0"/>

                <Button Grid.Column="2" Text="⚙️ HUB SETTINGS" Clicked="OnSettingsClicked" BackgroundColor="#343a40" TextColor="White"/>
            </Grid>
        </Border>

        <Border Grid.Row="1" Grid.Column="0" BackgroundColor="#343a40" StrokeThickness="0">
            <Grid RowDefinitions="Auto, *">

                <Grid Grid.Row="0" ColumnDefinitions="*, *" Padding="10">
                    <Button Grid.Column="0" Text="+ FILE" Clicked="OnNewFileClicked" BackgroundColor="#495057" FontSize="11" Margin="0,0,2,0"/>
                    <Button Grid.Column="1" Text="- DELETE" Clicked="OnDeleteFileClicked" BackgroundColor="#dc3545" FontSize="11" Margin="2,0,0,0"/>
                </Grid>

                <CollectionView Grid.Row="1" x:Name="FileListComponent" SelectionMode="Single" SelectionChanged="OnFileSelected">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Grid Padding="15,8" RowDefinitions="Auto, Auto">
                                <Label Text="{Binding FileName}" TextColor="White" FontSize="14" FontAttributes="Bold"/>
                                <Label Grid.Row="1" Text="{Binding FolderPath}" TextColor="#adb5bd" FontSize="10"/>
                            </Grid>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </Grid>
        </Border>

        <Grid Grid.Row="1" Grid.Column="1" RowDefinitions="Auto, *, Auto, 2*" Padding="20" RowSpacing="10">

            <Grid Grid.Row="0" ColumnDefinitions="*, Auto">
                <Label x:Name="EditorHeader" Text="Select a File" FontSize="18" FontAttributes="Bold" VerticalOptions="Center" TextColor="{AppThemeBinding Light=Black, Dark=White}"/>

                <HorizontalStackLayout Grid.Column="1" Spacing="10">
                    <Button Text="+ ROUTE" Clicked="OnAddRouteClicked" BackgroundColor="#0d6efd" FontSize="12" HeightRequest="35"/>
                    <Button Text="- REMOVE" Clicked="OnRemoveRouteClicked" BackgroundColor="#dc3545" FontSize="12" HeightRequest="35"/>
                </HorizontalStackLayout>
            </Grid>

            <Border Grid.Row="1" Stroke="#dee2e6" StrokeThickness="1" BackgroundColor="White">
                <CollectionView x:Name="RouteListComponent" SelectionMode="Single" SelectionChanged="OnRouteSelected">
                    <CollectionView.Header>
                        <Label Text="ROUTES &amp; SETTINGS" BackgroundColor="#e9ecef" TextColor="Black" Padding="10,5" FontAttributes="Bold" FontSize="12"/>
                    </CollectionView.Header>
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Grid Padding="10" ColumnDefinitions="Auto, *">
                                <BoxView Color="{Binding StatusColor}" WidthRequest="10" HeightRequest="10" CornerRadius="5" VerticalOptions="Center" Margin="0,0,10,0"/>
                                <Label Grid.Column="1" Text="{Binding Key}" TextColor="Black" FontSize="14" FontAttributes="Bold"/>
                            </Grid>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </Border>

            <Label Grid.Row="2" Text="EDIT PROPERTIES" FontSize="12" TextColor="Gray" FontAttributes="Bold" Margin="0,10,0,0"/>

            <ScrollView Grid.Row="3">
                <VerticalStackLayout Spacing="10" x:Name="FormContainer">

                    <VerticalStackLayout x:Name="SectionRoute" IsVisible="False">
                        <Label Text="Page Title" FontSize="12" TextColor="Gray" FontAttributes="Bold"/>
                        <Entry x:Name="EntryTitle" Placeholder="Page Title" TextChanged="OnFormChanged"/>

                        <Label Text="View Path" FontSize="12" TextColor="Gray" FontAttributes="Bold" Margin="0,10,0,0"/>
                        <Grid ColumnDefinitions="*, Auto">
                            <Entry Grid.Column="0" x:Name="EntryView" Placeholder="pages/..." TextChanged="OnFormChanged"/>
                            <Label Grid.Column="1" x:Name="LblViewStatus" Text="❓" VerticalOptions="Center" Margin="10,0"/>
                        </Grid>

                        <VerticalStackLayout Margin="0,10,0,0">
                            <Label Text="Theme" FontSize="12" TextColor="Gray" FontAttributes="Bold"/>
                            <Entry x:Name="EntryTheme" TextChanged="OnFormChanged"/>
                        </VerticalStackLayout>
                    </VerticalStackLayout>

                    <VerticalStackLayout x:Name="SectionCommon" IsVisible="False">
                        <Label Text="Navbar Brand Text" FontSize="12" TextColor="Gray" FontAttributes="Bold"/>
                        <Entry x:Name="EntryBrandText" TextChanged="OnFormChanged"/>
                        <Label Text="Navbar Logo URL" FontSize="12" TextColor="Gray" FontAttributes="Bold" Margin="0,10,0,0"/>
                        <Entry x:Name="EntryBrandLogo" TextChanged="OnFormChanged"/>
                        <Label Text="Primary Font" FontSize="12" TextColor="Gray" FontAttributes="Bold" Margin="0,10,0,0"/>
                        <Entry x:Name="EntryFont" Placeholder="e.g. Roboto" TextChanged="OnFormChanged"/>
                    </VerticalStackLayout>

                    <VerticalStackLayout x:Name="SectionSettings" IsVisible="False">
                        <Label Text="Site Name" FontSize="12" TextColor="Gray" FontAttributes="Bold"/>
                        <Entry x:Name="EntrySiteName" TextChanged="OnFormChanged"/>
                        <Label Text="Project Slug" FontSize="12" TextColor="Gray" FontAttributes="Bold" Margin="0,10,0,0"/>
                        <Entry x:Name="EntrySlug" TextChanged="OnFormChanged"/>
                        <Label Text="CDN Base URL" FontSize="12" TextColor="Gray" FontAttributes="Bold" Margin="0,10,0,0"/>
                        <Entry x:Name="EntryCdn" TextChanged="OnFormChanged"/>
                        <Label Text="Default Theme" FontSize="12" TextColor="Gray" FontAttributes="Bold" Margin="0,10,0,0"/>
                        <Entry x:Name="EntryDefTheme" TextChanged="OnFormChanged"/>
                        <Label Text="ANALYTICS CONFIG" FontSize="14" TextColor="#0dcaf0" FontAttributes="Bold" Margin="0,20,0,5"/>
                        <BoxView HeightRequest="1" Color="#dee2e6" Margin="0,0,0,10"/>
                        <Grid ColumnDefinitions="Auto, *">
                            <CheckBox x:Name="CheckAnalytics" CheckedChanged="OnFormChanged"/>
                            <Label Grid.Column="1" Text="Enable Tracking" VerticalOptions="Center"/>
                        </Grid>
                        <Label Text="Tracking ID" FontSize="12" TextColor="Gray" FontAttributes="Bold" Margin="0,10,0,0"/>
                        <Entry x:Name="EntryTrackingId" TextChanged="OnFormChanged"/>
                    </VerticalStackLayout>

                    <VerticalStackLayout Spacing="10" Margin="0,15,0,0">
                        <BoxView HeightRequest="1" Color="#dee2e6"/>
                        <Label Text="Context (Site)" FontSize="12" TextColor="Gray" FontAttributes="Bold"/>
                        <Entry x:Name="EntryContext" TextChanged="OnFormChanged"/>
                        <Label Text="Sidebar Menu" FontSize="12" TextColor="Gray" FontAttributes="Bold"/>
                        <Grid ColumnDefinitions="Auto, *">
                            <CheckBox x:Name="CheckSidebar" CheckedChanged="OnFormChanged"/>
                            <Entry Grid.Column="1" x:Name="EntrySidebar" Placeholder="Sidebar JSON key" TextChanged="OnFormChanged"/>
                        </Grid>
                        <Label Text="Header Menu" FontSize="12" TextColor="Gray" FontAttributes="Bold"/>
                        <Entry x:Name="EntryHeader" TextChanged="OnFormChanged"/>
                    </VerticalStackLayout>

                </VerticalStackLayout>
            </ScrollView>
        </Grid>
    </Grid>
</ContentPage>